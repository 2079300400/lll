"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[209],{8231:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"注册","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),t("van-form",{ref:"regForm",on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"username",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("van-field",{attrs:{clearable:"",label:"验证码",name:"vercode",placeholder:"请输入短信验证码",rules:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"验证码错误"}]},scopedSlots:e._u([{key:"button",fn:function(){return[t("van-button",{attrs:{size:"small",type:"primary","native-type":"button",disabled:e.btnDisabled},on:{click:e.send}},[e._v(e._s(e.code_text))])]},proxy:!0}]),model:{value:e.vercode,callback:function(t){e.vercode=t},expression:"vercode"}}),t("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{validator:e=>/^\w{6,12}$/.test(e),message:"密码格式为6-12位字母或数字"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:e.baseColor,loading:e.submitLoading}},[e._v("提交")])],1)],1)],1)},n=[],r=(s(1611),s(7061)),o=(s(3970),s(140)),l=s(2900),i={components:{[o.Z.name]:o.Z,[r.Z.name]:r.Z},data(){return{username:"",password:"",vercode:"",btnDisabled:!1,code_text:"发送验证码",submitLoading:!1}},methods:{onSubmit(e){console.log("submit",e),this.submitLoading=!0,(0,l.YD)(e).then((e=>{console.log(e)})).finally((e=>{this.submitLoading=!1}))},async send(){try{await this.$refs.regForm.validate("username"),this.btnDisabled=!0,this.code_text="发送中...";let e=null,t=10;(0,l.Q6)({mobile:this.username,type:"register"}).then((s=>{0==s.code?(this.$toast(`验证码已经发送到${this.username},请注意查收`),e=setInterval((s=>{t--,this.code_text=`${t}s后再次发送`,t<=0&&(clearInterval(e),t=10,this.code_text="再次获取",this.btnDisabled=!1)}),1e3)):(this.$toast(s.msg),this.btnDisabled=!1,this.code_text="再次发送")})).catch((e=>{this.$toast(res.msg||"网络错误"),this.btnDisabled=!1,this.code_text="再次发送"}))}catch(e){}}}},d=i,u=s(1001),c=(0,u.Z)(d,a,n,!1,null,null,null),m=c.exports}}]);
//# sourceMappingURL=209.bb207c8a.js.map